<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.baofu.international.global.account.core.dal.mapper.UserWithdrawRelationMapper">
    <resultMap id="BaseResultMap" type="com.baofu.international.global.account.core.dal.model.UserWithdrawRelationDo">
        <id column="ID" jdbcType="BIGINT" property="id"/>
        <result column="RELATION_ID" jdbcType="BIGINT" property="relationId"/>
        <result column="BIZ_TYPE" jdbcType="TINYINT" property="bizType"/>
        <result column="WITHDRAW_BATCH_ID" jdbcType="BIGINT" property="withdrawBatchId"/>
        <result column="WITHDRAW_ID" jdbcType="BIGINT" property="withdrawId"/>
        <result column="REMARKS" jdbcType="VARCHAR" property="remarks"/>
        <result column="CREATE_AT" jdbcType="TIMESTAMP" property="createAt"/>
        <result column="CREATE_BY" jdbcType="VARCHAR" property="createBy"/>
        <result column="UPDATE_AT" jdbcType="TIMESTAMP" property="updateAt"/>
        <result column="UPDATE_BY" jdbcType="VARCHAR" property="updateBy"/>
    </resultMap>
    <sql id="Base_Column_List">
        ID, RELATION_ID, BIZ_TYPE, WITHDRAW_BATCH_ID, WITHDRAW_ID, REMARKS, CREATE_AT, CREATE_BY,
        UPDATE_AT, UPDATE_BY
    </sql>
    <!--新增汇总和批次关系记录-->
    <insert id="insertWithdrawRelation" parameterType="com.baofu.international.global.account.core.dal.model.UserWithdrawRelationDo">
        /**TUserWithdrawRelationMapper.insertWithdrawRelation**/
        INSERT INTO T_USER_WITHDRAW_RELATION (
            RELATION_ID,
            BIZ_TYPE,
            WITHDRAW_BATCH_ID,
            WITHDRAW_ID,
            REMARKS,
            CREATE_AT,
            CREATE_BY,
            UPDATE_AT,
            UPDATE_BY
        )VALUES (
            #{relationId},
            #{bizType},
            #{withdrawBatchId},
            #{withdrawId},
            #{remarks},
            NOW(),
            #{createBy},
            NOW(),
            #{updateBy}
        )
    </insert>

    <!--根据批次号获取明细编号-->
    <select id="selectWithdrawIdByBatchNo" parameterType="java.lang.Long" resultType="java.lang.Long">
        /**TUserWithdrawRelationMapper.selectWithdrawIdByBatchNo**/
        SELECT
        WITHDRAW_ID
        FROM
        T_USER_WITHDRAW_RELATION
        WHERE
        WITHDRAW_BATCH_ID = #{withdrawBatchId}
    </select>
</mapper>