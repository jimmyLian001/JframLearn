<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.baofu.international.global.account.core.dal.mapper.UserSettleApplyMapper">
  <resultMap id="BaseResultMap" type="com.baofu.international.global.account.core.dal.model.UserSettleApplyDo">
    <id column="ID"                 jdbcType="BIGINT"     property="id" />
    <result column="MEMBER_ID"      jdbcType="BIGINT"     property="memberId" />
    <result column="MEMBER_REQ_ID"  jdbcType="VARCHAR"    property="memberReqId" />
    <result column="BUSINESS_NO"    jdbcType="BIGINT"     property="businessNo" />
    <result column="BUSINESS_TYPE"  jdbcType="VARCHAR"    property="businessType" />
    <result column="FILE_TYPE"      jdbcType="VARCHAR"    property="fileType" />
    <result column="SETTLE_NAME"    jdbcType="VARCHAR"    property="settleName" />
    <result column="NOTIFY_URL"     jdbcType="VARCHAR"    property="notifyUrl" />
    <result column="APPLY_STATUS"   jdbcType="TINYINT"    property="applyStatus" />
    <result column="SETTLE_STATUS"  jdbcType="TINYINT"    property="settleStatus" />
    <result column="REMARKS"        jdbcType="VARCHAR"    property="remarks" />
    <result column="CREATE_AT"      jdbcType="TIMESTAMP"  property="createAt" />
    <result column="CREATE_BY"      jdbcType="VARCHAR"    property="createBy" />
    <result column="UPDATE_AT"      jdbcType="TIMESTAMP"  property="updateAt" />
    <result column="UPDATE_BY"      jdbcType="VARCHAR"    property="updateBy" />
  </resultMap>
  <sql id="Base_Column_List">
    ID, MEMBER_ID, MEMBER_REQ_ID, BUSINESS_NO, BUSINESS_TYPE, FILE_TYPE, SETTLE_NAME, NOTIFY_URL,
    APPLY_STATUS, SETTLE_STATUS, REMARKS, CREATE_AT, CREATE_BY, UPDATE_AT, UPDATE_BY
  </sql>
  <select id="selectByReqId" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from T_USER_SETTLE_APPLY
    where MEMBER_REQ_ID = #{memberReqId,jdbcType=VARCHAR}
  </select>
  <insert id="insert" parameterType="com.baofu.international.global.account.core.dal.model.UserSettleApplyDo">
    insert into T_USER_SETTLE_APPLY (
      MEMBER_ID,
      MEMBER_REQ_ID,
      BUSINESS_NO,
      BUSINESS_TYPE,
      FILE_TYPE,
      SETTLE_NAME,
      NOTIFY_URL,
      APPLY_STATUS,
      REMARKS,
      CREATE_AT,
      CREATE_BY,
      UPDATE_AT,
      UPDATE_BY)
    values (
      #{memberId,jdbcType=BIGINT},
      #{memberReqId,jdbcType=VARCHAR},
      #{businessNo,jdbcType=BIGINT},
      #{businessType,jdbcType=VARCHAR},
      #{fileType,jdbcType=VARCHAR},
      #{settleName,jdbcType=VARCHAR},
      #{notifyUrl,jdbcType=VARCHAR},
      #{applyStatus,jdbcType=TINYINT},
      #{remarks,jdbcType=VARCHAR},
      NOW(),
      #{createBy,jdbcType=VARCHAR},
      NOW(),
      #{updateBy,jdbcType=VARCHAR}
      )
  </insert>

  <!-- 根据平台流水号修改 -->
  <update id="updateUserSettleApply" parameterType="com.baofu.international.global.account.core.dal.model.UserSettleApplyDo">
    UPDATE T_USER_SETTLE_APPLY
    <set>
      <if test="applyStatus != null ">
        APPLY_STATUS = #{applyStatus,jdbcType=BIGINT},
      </if>
      <if test="settleStatus != null ">
        SETTLE_STATUS = #{settleStatus,jdbcType=BIGINT},
      </if>
      <if test="remarks != null ">
        REMARKS = #{remarks,jdbcType=VARCHAR},
      </if>
      UPDATE_AT = NOW()
    </set>
    WHERE MEMBER_REQ_ID = #{memberReqId,jdbcType=VARCHAR}
  </update>
</mapper>